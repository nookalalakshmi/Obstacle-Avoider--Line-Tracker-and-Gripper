<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<meta name="author" content="prottoss">
<meta name="generator" content="Smart Web Builder">
<meta name="description" content="AVR910 USB Programmer">
<meta name="keywords" content="programmer, программатор, AVR910, AVR, ATmega, mega, АТМЕГА, МЕГА, программирование, микроконтроллер, ЖКИ, LCD, SPI, USB, 90S, 89S, ATMEL, embedded">
<meta name="document-state" content="dynamic">
<meta name="robots" content="all">
<meta name="resource-type" content="DOCUMENT">
<meta name="updated" content="04.08.2006 3:22:44">
<meta name="cache-control" content="public">
<title> AVR910 USB программатор </title>  
</head>
<body text=#000000 link=#0000ff alink=#ff0000 vlink=#800080 bgcolor=#ffffff>
<p>
<div align="center"><b><font size=+1 style=" font-weight: bold;">Программатор микроконтроллеров AVR / 89S совместимый с AVR910</font></b></div></p>
<p>
Программатор выполнен на основе драйвера от <a href="http://www.obdev.at/products/avrusb/index.html" name="">Objective Development</a> и полностью совместим по командам с оригинальным программатором AVR910 от ATMEL.  Описание оригинальной схемы программатора можно взять в <a href="http://www.atmel.com/dyn/resources/prod_documents/DOC0943.PDF" name="">Application Note AVR910: In-System Programming</a>, а список поддерживаемых команд можно посмотреть в <a href="http://www.atmel.com/dyn/resources/prod_documents/DOC2559.PDF" name="">Application Note AVR109: Self Programming</a></p>  
<p><hr>
<b><i><u>Конструкция:</b></i></u></p>
<p>
Схема программатора приведена на рисунке ниже. Предохранитель F1 служит для защиты линий питания порта USB от случайного замыкания по цепям питания программатора. Диоды VD1, VD2 – обычные выпрямительные, с прямым падением напряжения ~0,6…0,7В, предназначены для  понижения питания микроконтроллера DD1 до 3,6 В. Светодиоды VL1, VL2 сигнализируют о текущих действиях программатора, и, соответственно, обозначают режимы чтения и записи. Светодиод VL3 служит для сигнализации подачи питания на программатор.</p> 
<p>
<div align="center"><img src="AVR910_USB_Programmer.files/image001.png" alt="Схема программатора" align=center></div></p> 
<p>
Джампер <b>J1-J2</b> служит как для начального программирования микроконтроллера (замкнут J1 - <b>MOD</b>ify), так и для использования в качестве разъема программатора (замкнут J2 - <b>NORM</b>al) . Резисторы R10 - R13 предназначены для согласования уровней сигналов контроллера программатора и программируемого контроллера.</p>
<p>
Для возможности работы с контроллерами, работающими на пониженной тактовой частоте, скорость работы SPI сделана “плавающей”, т.е. , в зависимости от тактовой частоты программируемого микроконтроллера, частота SPI может принимать значения 375 кГц, 187,5 кГц и 93,75 кГц. Это позволяет программировать контроллеры с тактовой частотой примерно от 300 кГц для tiny/mega и 400 кГц для 90S . Программирование контроллеров серии 89S осуществляется только на самой низкой частоте (у них нет возможности определения входа в режим программирования). Это позволило программировать контроллеры с кварцевым резонатором от 3,75 МГц и выше. Контроллеры программируются от 10 до 30 секунд вместе с верификацией в зависимости от объема FLASH памяти и тактовой частоты.</p>
<p>
Программатор тестировался с программами AVRProg v.1.4 (входит в пакет <a href="http://www.atmel.com/dyn/products/tools_card.asp?tool_id=2725" name="">AVRStudio</a>), <a href="http://www.chipblaster.com" name="">ChipBlasterAVR v.1.07 Evaluation </a>, <a href="http://www.atmel.com/dyn/resources/prod_documents/doc2568.pdf" name="">AVROSP (ATMEL AVR Open Source Programmer)</a>, <a href="http://www.hpinfotech.ro/html/download.htm" name="">CodeVisionAVR</a> . Кроме того, программатор тестировался с программой <a href="http://savannah.gnu.org/projects/avrdude/" name="">AVRDUDE</a>, однако, программа с данным программатором не совместима, так как не все команды протокола <a href="http://www.atmel.com/dyn/resources/prod_documents/DOC0943.PDF" name="">AVR910</a> отрабатывает корректно. Программатор позволяет программировать все контроллеры AVR, поддерживающие ISP (In System Programming - Программирование В Системе), а так же МК серии 89S - 89S53 и 89S8252. На данный момент с вышеперечисленными программами протестировано программирование контроллеров <b>89S53, 89S8252, 90S2313, 90S8515, ATtiny26, ATtiny45, ATtiny2313, ATmega8, ATmega48, ATmega8515, ATmega8535, ATmega16, ATmega128, AT90CAN128</b>.</p>
<p><hr>
<b><i><u>Прошивка FUSE BITS:</u></i></b></p>
<p>
Для нормального функционирования контроллера в схеме необходимо, чтобы были запрограммированны (установленны в "0") биты SPIEN и SUT0. Так же желательно (но не обязательно) запрограммировать (установить в "0") бит BODEN, что разрешит работу встроенного в МК broun-out детектора. При незапрограммированном бите BODLEVEL уставка срабатывания broun-out детектора будет на уровне 2,4...2,9 Вольт... Остальные биты должны быть незапрограммированны (установленны в "1")</p> 
<p><hr>
<b><i><u>Инсталляция:</u></i></b></p>
<p>
Прошить контроллер. Подключить свежеиспеченный программатор к РС через свободный разъем USB. ОС найдет новое устройство – <b>AVR910 USB Programmer</b>, при предложении автоматически найти драйвер, отказаться, и указать путь к файлу <b>prottoss.avr910.usb.inf</b>. При предупреждении, что драйвер не имеет цифровой подписи, послать ОС в эротическое путешествие. Небольшие проблемы у меня возникли, когда, после установки, программа AVRProg v. 1.4 не смогла найти программатор, так как ОС присвоила ему номер COM9. После мониторинга портов оказалось, что AVRProg ищет устройство только на COM1 и COM2…Проблема разрешилась, когда я изменил номер порта на СОМ1(2). Это можно сделать, если зайти в диспетчере устройств в: <b>AVR910 USB Programmer -> Свойства–> Параметры порта -> Дополнительно -> Номер COM-порта</b></p>
<p><font color="red">
Внимание! Программатор тестировался только c ОС Windows XP (SP1, SP2)</font></p>
<p><hr>
<b><i><u>Файлы:</u></i></b></p>
<p>
<a href="AVR910_USB_Programmer.files/avr910_usb_programmer.files.rar" name="">avr910_usb_programmer.files.rar</a>                    Архив содержит файл прошивки, установочный inf-файл и схему в формате Adobe pdf</p>
<p><hr>
<a href="../" name="">На главную</a><br>
<a href="mailto:pinokio3000@yandex.ru" name="">Написать мне</a></p>
<p><hr>
Автор - Рыжков Андрей vs <b>PROTTOSS</b><br>
последнее обновление: 25.08.2006
</body>
</html>